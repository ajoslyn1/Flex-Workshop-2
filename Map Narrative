<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.32.1/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.32.1/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

<style>
#map {
    position: fixed;
    width:50%;
}
#features {
    width: 50%;
    margin-left: 50%;
    font-family: sans-serif;
    overflow-y: scroll;
    background-color: #fafafa;
}
section {
    padding:  25px 50px;
    line-height: 25px;
    border-bottom: 1px solid #ddd;
    opacity: 0.25;
    font-size: 13px;
}
section.active {
    opacity: 1;
}
section:last-child {
    border-bottom: none;
    margin-bottom: 200px;
}
</style>

<div id='map'></div>
<div id='features'>
    <section id='garden'>
        <h3>Garden Parkway</h3>
        <p>this is the house i lived in for the first 6ish years of my life. it's the last house on a quiet dead-end street. I was the youngest kid on this street when i lived there so my friends were a solid 4 years older than me, but apparently they put up with me. </p>
    </section>
    <section id='jozzyland'>
        <h3>Jozzyland</h3>
        <p>Grandparent's house they built around 1970. really cool. it's huge and has an elevator that scared teh crap outta me. it also has a really nice dock on the river.  lived here for a brief time while our current house was being built.</p>
    </section>
    <section id='home'>
        <h3>Home now</h3>
        <p>This is the house I've lived in since it was built in 2002. </p>
    </section>
    <section id='grandmas'>
        <h3>Grandma's</h3>
        <p>grandma's house. spent my time here while my mom was at work before I started school, and went here after school untill I was in middle school.</p>
    </section>
    <section id='tm'>
        <h3>Matt and Trisha's</h3>
        <p>matt, trisha and Logan's house.</p>
    </section>
    <section id='sidway'>
        <h3>Charlotte Sidway School</h3>
        <p>elementary school (K-1) </p>
    </section>
    <section id='kaegebein'>
        <h3>William M. Kaegebein Elementary School</h3>
        <p>elementary school (2-5)</p>
    </section>
    <section id='mshs'>
        <h3>Veronica E Conner Middle School and GIHS</h3>
        <p>middle and highschool</p>
    </section>
    <section id='asi'>
        <h3>ASI Signage Innovations</h3>
        <p> My family owns this location. And baically the whole family works here. (mom, dad, two of my aunts, two of my uncles, my grandma, my grandpa, two of my cousins, me, and now my younger brother.) I basically grew up here. I remember riding my scooter around the back shop on weekends and decorating it with scraps on vinyl. I've ~officially~ worked here since summer of 2012. </p>
    </section>

</div>
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiYWpvc2x5biIsImEiOiJjaXpuZXRkZ2kwMmp5MnFvOGppOG9tNGJwIn0.-CiAZANEKKSePa42lzBbuA';

var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/ajoslyn/ciznevh5p002g2snyecxhl2mq',
    center: [-78.945,43.017],
    zoom: 15.5,
    bearing: 27,
    pitch: 45
});

var chapters = {
    'home': {
        bearing: 27,
        center: [-79.000,42.996],
        zoom: 15.5,
        pitch: 20
    },
    'tm': {
        duration: 6000,
        center: [-78.950,42.998],
        bearing: 150,
        zoom: 15,
        pitch: 0
    },
    'garden': {
        bearing: 90,
        center: [-78.953,43.048],
        zoom: 13,
        speed: 0.6,
        pitch: 40
    },
    'jozzyland': {
        bearing: 90,
        center: [-78.901,43.018],
        zoom: 12.3
    },
    'grandmas': {
        bearing: 45,
        center: [-78.955,42.981],
        zoom: 15.3,
        pitch: 20,
        speed: 0.5
    },
    'mshs': {
        bearing: 180,
        center: [-78.934,43.039],
        zoom: 13
    },
    'kaegebein': {
        bearing: 90,
        center: [-78.954,42.994],
        zoom: 17.3,
        pitch: 40
    },
    'sidway': {
        bearing: 90,
        center: [-78.964,43.030],
        zoom: 14.3,
        pitch: 20
    },
    'asi': {
        bearing: 90,
        center: [-78.987,43.042],
        zoom: 14.3,
        pitch: 20
    }
};

// On every scroll event, check which element is on screen
window.onscroll = function() {
    var chapterNames = Object.keys(chapters);
    for (var i = 0; i < chapterNames.length; i++) {
        var chapterName = chapterNames[i];
        if (isElementOnScreen(chapterName)) {
            setActiveChapter(chapterName);
            break;
        }
    }
};

var activeChapterName = 'baker';
function setActiveChapter(chapterName) {
    if (chapterName === activeChapterName) return;

    map.flyTo(chapters[chapterName]);

    document.getElementById(chapterName).setAttribute('class', 'active');
    document.getElementById(activeChapterName).setAttribute('class', '');

    activeChapterName = chapterName;
}

function isElementOnScreen(id) {
    var element = document.getElementById(id);
    var bounds = element.getBoundingClientRect();
    return bounds.top < window.innerHeight && bounds.bottom > 0;
}

</script>

</body>
</html>
